<launch>

    <arg name="lgsvl" default="true"/>
    <arg name="map" default="true"/>
    <arg name="system" default="true"/>
    <arg name="sensing" default="true"/>
    <arg name='localization' default='false'/>
    <arg name="perception" default="true"/>
    <arg name="planning" default="true"/>
    <arg name='control' default='true'/>

    <arg name='use_pointcloud_map' default='false'/>
    <arg name='lanelet2_map' default='SanFrancisco.osm'/> <!--borregasave.osm-->
    <arg name='pointcloud_map' default='BorregasAve.pcd'/>
    <arg name='use_multi_lidar' default='false'/>
    <arg name='yolo_type' default='yolov5m'/>
    
    <!-- <arg name='use_sim_time' default='false' /> -->
    <arg if="$(eval &quot; '$(var lgsvl)' =='true'&quot;)" name="use_sim_time" default="true"/>
    <arg if="$(eval &quot; '$(var lgsvl)' =='false'&quot;)" name="use_sim_time" default="false"/>
    <!-- <arg if="$(eval &quot; '$(var lgsvl)' == 'true' &quot;)" name='use_sim_time' default='true' /> -->

    <!-- <include file="$(find-pkg-share global_parameter_loader)/launch/global_params.launch.py" if='$(var lgsvl)'>
      <arg name="use_sim_time" value="true"/>
      <arg name="vehicle_model" value="$(var vehicle_model)"/>
    </include> -->

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_lgsvl_taeho.launch.py" if='$(var lgsvl)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
    </include>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_map_taeho.launch.py" if='$(var map)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
      <arg name='use_pointcloud_map' value='$(var use_pointcloud_map)'/>
      <arg name='lanelet2_map' value='$(var lanelet2_map)'/>
      <arg name='pointcloud_map' value='$(var pointcloud_map)'/>
    </include>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_system_taeho.launch.py" if='$(var system)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
    </include>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_sensing_taeho.launch.py" if='$(var sensing)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
      <arg name='use_multi_lidar' value='$(var use_multi_lidar)'/>
    </include>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_localization_taeho.launch.py" if='$(var localization)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
    </include>

    <arg name ="lidar_channel" default="16"/>
    <arg if="$(eval &quot; '$(var lidar_channel)' =='16'&quot;)" name="base_name" default="vlp-16"/>
    <arg if="$(eval &quot; '$(var lidar_channel)' =='64'&quot;)" name="base_name" default="hdl-64"/>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_perception_taeho.launch.py" if='$(var perception)'>
      <arg name='lidar_apollo_instance_segmentation_param_path' value="$(find-pkg-share ichthus_launch)/param/lidar_apollo_instance_segmentation_$(var base_name).param.yaml" />
      <arg name='yolo_type' value='$(var yolo_type)'/>
      <arg name='mode' value='INT8' />
      <arg name='model_name' value='default' />
      <arg name='use_sim_time' value='$(var use_sim_time)' />
    </include>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_planning_taeho.launch.py" if='$(var planning)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
    </include>

    <include file="$(find-pkg-share ichthus_launch)/launch/taeho/ichthus_control_taeho.launch.py" if='$(var control)'>
      <arg name='use_sim_time' value='$(var use_sim_time)' />
    </include>
</launch>
